{% extends "admin/admin_base.html" %}

{% block admin_title %}Projects Management{% endblock %}
{% block page_title %}Projects Management{% endblock %}
{% block breadcrumb %}<span class="breadcrumb-separator">/</span> <span>Projects Management</span>{% endblock %}

{% block admin_content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="mb-1">Projects Management</h2>
        <p class="mb-0">Manage club projects and showcases</p>
    </div>
    <a href="{{ url_for('admin.add_project') }}" class="admin-btn admin-btn-primary">
        <i class="fas fa-plus"></i> Add Project
    </a>
</div>

{% if projects %}
<div class="admin-table-container">
    <div class="admin-card-header">
        <h5><i class="fas fa-project-diagram"></i> Projects ({{ projects|length }})</h5>
    </div>
    <div class="table-responsive">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Project Details</th>
                    <th>Technologies</th>
                    <th>Team Members</th>
                    <th>Created Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for project in projects %}
                <tr>
                    <td>
                        <div class="d-flex align-items-center">
                            {% if project.image %}
                            <img src="{{ project.image }}" alt="{{ project.title }}" class="me-3" style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px;">
                            {% endif %}
                            <div>
                                <h6 class="mb-1">{{ project.title }}</h6>
                                <p class="mb-0 small">{{ project.description[:100] }}{% if project.description|length > 100 %}...{% endif %}</p>
                            </div>
                        </div>
                    </td>
                    <td>
                        {% if project.technologies %}
                            {% for tech in project.get_technologies_list()[:3] %}
                                <span class="admin-badge admin-badge-primary">{{ tech }}</span>
                            {% endfor %}
                            {% if project.get_technologies_list()|length > 3 %}
                                <span class="admin-badge admin-badge-secondary">+{{ project.get_technologies_list()|length - 3 }} more</span>
                            {% endif %}
                        {% else %}
                            <span >Not specified</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if project.team_members %}
                            <small>{{ project.team_members[:50] }}{% if project.team_members|length > 50 %}...{% endif %}</small>
                        {% else %}
                            <span >Not specified</span>
                        {% endif %}
                    </td>
                    <td>
                        <div>
                            {{ project.created_at.strftime('%Y-%m-%d') }}
                            <br>
                            <small >{{ project.created_at.strftime('%H:%M') }}</small>
                        </div>
                    </td>
                    <td>
                        <div class="btn-group">
                            <a href="{{ url_for('admin.edit_project', project_id=project.id) }}" class="admin-btn admin-btn-sm admin-btn-outline">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{{ url_for('admin.delete_project', project_id=project.id) }}" 
                               class="admin-btn admin-btn-sm admin-btn-danger"
                               onclick="return confirm('Are you sure you want to delete this project? This action cannot be undone.')">
                                <i class="fas fa-trash"></i> Delete
                            </a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% else %}
<div class="admin-empty-state">
    <i class="fas fa-project-diagram"></i>
    <h5>No projects found</h5>
    <p>Start by adding your first project to showcase club achievements.</p>
    <a href="{{ url_for('admin.add_project') }}" class="admin-btn admin-btn-primary">
        <i class="fas fa-plus"></i> Add Project
    </a>
</div>
{% endif %}
{% endblock %}
